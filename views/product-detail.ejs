<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <link href="/css/output.css" rel="stylesheet">
</head>
<body class="font-inter bg-white">
    
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="/" class="flex items-center space-x-2 text-xl font-bold text-gray-900 hover:text-primary-600 transition-colors">
                        <svg class="w-8 h-8 text-primary-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                        </svg>
                        <span class="font-display">Unhemmed</span>
                    </a>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="/" class="text-gray-600 hover:text-primary-600 font-medium transition-colors">Home</a>
                    <a href="/men" class="text-gray-600 hover:text-primary-600 font-medium transition-colors">Men's</a>
                    <a href="/women" class="text-gray-600 hover:text-primary-600 font-medium transition-colors">Women's</a>
                    <a href="/products" class="text-gray-600 hover:text-primary-600 font-medium transition-colors">All Products</a>
                    <a href="/about" class="text-gray-600 hover:text-primary-600 font-medium transition-colors">About</a>
                    <a href="/contact" class="text-gray-600 hover:text-primary-600 font-medium transition-colors">Contact</a>
                </div>

                <!-- Right side icons -->
                <div class="flex items-center space-x-4">
                    <!-- Search -->
                    <div class="relative">
                        <button id="searchToggle" class="p-2 text-gray-400 hover:text-gray-500 transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </button>
                        
                        <!-- Search Dropdown -->
                        <div id="searchDropdown" class="hidden absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50">
                            <div class="p-4">
                                <form action="/products" method="GET" class="relative">
                                    <input type="text" name="search" placeholder="Search products..." 
                                           class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                    <svg class="absolute left-3 top-2.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                    </svg>
                                </form>
                                <div class="mt-3 pt-3 border-t border-gray-100">
                                    <p class="text-xs text-gray-500 mb-2">Popular searches:</p>
                                    <div class="flex flex-wrap gap-2">
                                        <a href="/products?search=shirt" class="text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors">Shirts</a>
                                        <a href="/products?search=jeans" class="text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors">Jeans</a>
                                        <a href="/products?search=dress" class="text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors">Dresses</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Dropdown -->
                    <div class="relative">
                        <button id="profileDropdown" class="flex items-center p-2 text-gray-400 hover:text-gray-500 transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </button>
                        
                        <!-- Profile Menu -->
                        <div id="profileMenu" class="hidden absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50">
                            <div class="p-4">
                                <!-- Guest View -->
                                <div id="guestView" class="space-y-3">
                                    <p class="text-sm text-gray-600">Welcome! Please sign in to access your account.</p>
                                    <div class="space-y-2">
                                        <a href="/login" class="block w-full text-center bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors">
                                            Sign In
                                        </a>
                                        <a href="/register" class="block w-full text-center border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors">
                                            Create Account
                                        </a>
                                    </div>
                                    <hr class="my-3">
                                    <a href="/cart" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                                        <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.8 9.2M7 13l-1.8-9.2m0 0L3 3m18 0l-4 8M7 13h10"></path>
                                        </svg>
                                        Shopping Cart
                                    </a>
                                    <a href="/contact" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                                        <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                        </svg>
                                        Contact Support
                                    </a>
                                </div>

                                <!-- Logged In View -->
                                <div id="loggedInView" class="hidden">
                                    <div class="flex items-center space-x-3 mb-4 p-3 bg-gray-50 rounded-lg">
                                        <div class="w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white font-medium">
                                            <span id="userInitials">U</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900" id="userName">Demo User</p>
                                            <p class="text-sm text-gray-500" id="userEmail">demo@example.com</p>
                                        </div>
                                    </div>
                                    <div class="space-y-1">
                                        <a href="/profile" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                                            <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                            </svg>
                                            My Profile
                                        </a>
                                        <a href="/orders" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                                            <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                            </svg>
                                            My Orders
                                        </a>
                                        <a href="/cart" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                                            <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.8 9.2M7 13l-1.8-9.2m0 0L3 3m18 0l-4 8M7 13h10"></path>
                                            </svg>
                                            Shopping Cart
                                        </a>
                                        <a href="/favorites" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                                            <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                            </svg>
                                            Favorites
                                        </a>
                                        <hr class="my-2">
                                        <button onclick="demoLogout()" class="flex items-center w-full px-3 py-2 text-sm text-red-700 hover:bg-red-50 rounded-lg transition-colors">
                                            <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                                            </svg>
                                            Sign Out
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cart -->
                    <a href="/cart" class="relative p-2 text-gray-400 hover:text-gray-500 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.8 9.2M7 13l-1.8-9.2m0 0L3 3m18 0l-4 8M7 13h10"></path>
                        </svg>
                        <span id="cartCount" class="absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                    </a>

                    <!-- Mobile menu button -->
                    <button id="mobileNavToggle" class="md:hidden p-2 text-gray-400 hover:text-gray-500">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path id="hamburgerIcon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                            <path id="closeIcon" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile menu -->
            <div id="mobileNav" class="hidden md:hidden pb-4">
                <div class="px-2 pt-2 pb-3 space-y-1">
                    <a href="/" class="block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors">Home</a>
                    <a href="/men" class="block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors">Men's</a>
                    <a href="/women" class="block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors">Women's</a>
                    <a href="/products" class="block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors">All Products</a>
                    <a href="/about" class="block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors">About</a>
                    <a href="/contact" class="block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors">Contact</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="bg-white border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <nav class="flex items-center space-x-2 text-sm">
                <a href="/" class="text-gray-500 hover:text-primary-600 transition-colors">Home</a>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
                <a href="/products?category=<%= product.category %>" class="text-gray-500 hover:text-primary-600 transition-colors"><%= product.category %>'s</a>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
                <span class="text-gray-900 font-medium"><%= product.name %></span>
            </nav>
        </div>
    </div>

    <!-- Product Detail -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <!-- Product Images -->
            <div class="space-y-4">
                <!-- Main Image -->
                <div class="aspect-square bg-gray-100 rounded-2xl overflow-hidden">
                    <img id="mainImage" 
                         src="<%= (product.images && product.images[0] && product.images[0].url) || product.image || '/images/placeholder.svg' %>" 
                         alt="<%= product.name %>" 
                         class="w-full h-full object-cover"
                         onerror="this.src='/images/placeholder.svg'">
                </div>
                
                <!-- Thumbnail Images -->
                <% if (product.images && product.images.length > 1) { %>
                <div class="flex space-x-4 overflow-x-auto">
                    <% product.images.forEach((image, index) => { %>
                    <button onclick="changeMainImage('<%= image.url %>', '<%= image.alt %>')" 
                            class="flex-shrink-0 w-20 h-20 bg-gray-100 rounded-lg overflow-hidden border-2 border-transparent hover:border-primary-600 transition-colors">
                        <img src="<%= image.url %>" 
                             alt="<%= image.alt %>" 
                             class="w-full h-full object-cover"
                             onerror="this.src='/images/placeholder.svg'">
                    </button>
                    <% }); %>
                </div>
                <% } %>
            </div>

            <!-- Product Information -->
            <div class="space-y-6">
                <!-- Product Header -->
                <div>
                    <div class="flex items-center gap-2 mb-2">
                        <span class="text-sm px-3 py-1 bg-primary-100 text-primary-600 rounded-full font-medium"><%= product.category %></span>
                        <span class="text-sm px-3 py-1 bg-gray-100 text-gray-600 rounded-full"><%= product.subcategory %></span>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-900 mb-2"><%= product.name %></h1>
                    <% if (product.brand) { %>
                    <p class="text-lg text-gray-600 mb-4">by <span class="font-medium"><%= product.brand %></span></p>
                    <% } %>
                    
                    <!-- Ratings -->
                    <% if (product.ratings && product.ratings.average) { %>
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="flex items-center">
                            <% for (let i = 1; i <= 5; i++) { %>
                                <% if (i <= Math.floor(product.ratings.average)) { %>
                                <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                </svg>
                                <% } else if (i <= product.ratings.average) { %>
                                <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                </svg>
                                <% } else { %>
                                <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                </svg>
                                <% } %>
                            <% } %>
                        </div>
                        <span class="text-sm text-gray-600">(<%= product.ratings.count || 0 %> reviews)</span>
                    </div>
                    <% } %>
                </div>

                <!-- Price -->
                <div class="flex items-center space-x-4">
                    <span class="text-4xl font-bold text-primary-600">$<%= product.price %></span>
                    <% if (product.comparePrice && product.comparePrice > product.price) { %>
                    <span class="text-2xl text-gray-500 line-through">$<%= product.comparePrice %></span>
                    <span class="text-sm bg-red-100 text-red-600 px-2 py-1 rounded-full font-medium">
                        Save $<%= (product.comparePrice - product.price).toFixed(2) %>
                    </span>
                    <% } %>
                </div>

                <!-- Description -->
                <div>
                    <p class="text-gray-700 leading-relaxed"><%= product.description %></p>
                </div>

                <!-- Features -->
                <% if (product.features && product.features.length > 0) { %>
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Features</h3>
                    <ul class="space-y-2">
                        <% product.features.forEach(feature => { %>
                        <li class="flex items-center space-x-2">
                            <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            <span class="text-gray-700"><%= feature %></span>
                        </li>
                        <% }); %>
                    </ul>
                </div>
                <% } %>

                <!-- Size Selection -->
                <% if (product.sizes && product.sizes.length > 0) { %>
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Select Size</h3>
                    <div class="grid grid-cols-4 gap-3">
                        <% product.sizes.forEach((size, index) => { %>
                        <button onclick="selectSize('<%= size.size %>')" 
                                data-size="<%= size.size %>"
                                class="size-option py-3 px-4 border border-gray-300 rounded-lg text-center font-medium hover:border-primary-600 hover:bg-primary-50 transition-colors <%= size.quantity <= 0 ? 'opacity-50 cursor-not-allowed' : '' %>"
                                <%= size.quantity <= 0 ? 'disabled' : '' %>>
                            <%= size.size %>
                            <% if (size.quantity <= 0) { %>
                            <div class="text-xs text-red-500 mt-1">Out of Stock</div>
                            <% } %>
                        </button>
                        <% }); %>
                    </div>
                </div>
                <% } %>

                <!-- Color Selection -->
                <% if (product.colors && product.colors.length > 0) { %>
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Select Color</h3>
                    <div class="flex space-x-3">
                        <% product.colors.forEach((color, index) => { %>
                        <button onclick="selectColor('<%= color.name %>', '<%= color.hex %>')" 
                                data-color="<%= color.name %>"
                                class="color-option relative w-12 h-12 rounded-full border-4 border-gray-300 hover:border-primary-600 transition-colors <%= color.quantity <= 0 ? 'opacity-50 cursor-not-allowed' : '' %>"
                                style="background-color: <%= color.hex %>"
                                title="<%= color.name %>"
                                <%= color.quantity <= 0 ? 'disabled' : '' %>>
                            <% if (color.quantity <= 0) { %>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </div>
                            <% } %>
                        </button>
                        <% }); %>
                    </div>
                    <div class="mt-2">
                        <span id="selectedColorName" class="text-sm text-gray-600">Select a color</span>
                    </div>
                </div>
                <% } %>

                <!-- Quantity and Add to Cart -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-lg font-semibold text-gray-900 mb-2">Quantity</label>
                        <div class="flex items-center space-x-3">
                            <button onclick="updateQuantity(-1)" class="w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                </svg>
                            </button>
                            <input type="number" id="quantity" value="1" min="1" max="10" class="w-20 text-center py-2 px-3 border border-gray-300 rounded-lg">
                            <button onclick="updateQuantity(1)" class="w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="flex space-x-4">
                        <button onclick="addToCartFromDetail()" 
                                class="flex-1 bg-primary-600 hover:bg-primary-700 text-white py-4 px-8 rounded-lg font-semibold text-lg transition-colors duration-200 flex items-center justify-center space-x-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.8 9.2M7 13l-1.8-9.2m0 0L3 3m18 0l-4 8M7 13h10"></path>
                            </svg>
                            <span>Add to Cart</span>
                        </button>
                        <button onclick="toggleWishlist()" 
                                class="w-16 h-16 border border-gray-300 rounded-lg flex items-center justify-center hover:bg-gray-50 transition-colors">
                            <svg class="w-6 h-6 text-gray-400 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Stock Status -->
                <% if (product.inventory && product.inventory.quantity !== undefined) { %>
                <div class="flex items-center space-x-2">
                    <% if (product.inventory.quantity > product.inventory.lowStockThreshold) { %>
                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-green-600 font-medium">In Stock (<%= product.inventory.quantity %> available)</span>
                    <% } else if (product.inventory.quantity > 0) { %>
                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                    <span class="text-sm text-yellow-600 font-medium">Low Stock (<%= product.inventory.quantity %> left)</span>
                    <% } else { %>
                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                    <span class="text-sm text-red-600 font-medium">Out of Stock</span>
                    <% } %>
                </div>
                <% } %>
            </div>
        </div>

        <!-- Related Products -->
        <div class="mt-16">
            <h2 class="text-2xl font-bold text-gray-900 mb-8">You might also like</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- This would be populated with related products from the server -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300">
                    <div class="aspect-square bg-gray-100 flex items-center justify-center">
                        <span class="text-gray-400">Related Product 1</span>
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-900 mb-2">Related Product</h3>
                        <p class="text-primary-600 font-bold">$29.99</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Company Info -->
                <div class="md:col-span-2">
                    <div class="flex items-center space-x-2 mb-4">
                        <svg class="w-8 h-8 text-primary-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                        </svg>
                        <span class="text-2xl font-bold font-display">Unhemmed</span>
                    </div>
                    <p class="text-gray-300 mb-4 max-w-md">Your premium destination for quality clothing and exceptional service.</p>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="/" class="text-gray-300 hover:text-white transition-colors">Home</a></li>
                        <li><a href="/products" class="text-gray-300 hover:text-white transition-colors">Products</a></li>
                        <li><a href="/about" class="text-gray-300 hover:text-white transition-colors">About</a></li>
                        <li><a href="/contact" class="text-gray-300 hover:text-white transition-colors">Contact</a></li>
                    </ul>
                </div>
                
                <!-- Contact Info -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact</h3>
                    <div class="space-y-2 text-gray-300">
                        <p>Email: khalilatkins420@gmail.com</p>
                        <p>Phone: (555) 123-4567</p>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 Unhemmed. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="/js/main.js"></script>
    <script src="/js/auth.js"></script>    <script>
        // Product-specific variables
        const product = {
            id: '<%= product._id || product.id %>',
            name: <%- JSON.stringify(product.name) %>,
            price: <%= product.price %>,
            image: <%- JSON.stringify((product.images && product.images[0] && product.images[0].url) || product.image || '/images/placeholder.svg') %>
        };

        let selectedSize = null;
        let selectedColor = null;
        
        // Check if sizes/colors are required
        const sizesRequired = <%= (product.sizes && product.sizes.length > 0) ? 'true' : 'false' %>;
        const colorsRequired = <%= (product.colors && product.colors.length > 0) ? 'true' : 'false' %>;

        // Image gallery functionality
        function changeMainImage(imageUrl, imageAlt) {
            const mainImage = document.getElementById('mainImage');
            mainImage.src = imageUrl;
            mainImage.alt = imageAlt;
        }

        // Size selection
        function selectSize(size) {
            selectedSize = size;
            
            // Update UI
            document.querySelectorAll('.size-option').forEach(btn => {
                btn.classList.remove('border-primary-600', 'bg-primary-50', 'text-primary-600');
                btn.classList.add('border-gray-300');
            });
            
            const selectedBtn = document.querySelector(`[data-size="${size}"]`);
            if (selectedBtn && !selectedBtn.disabled) {
                selectedBtn.classList.remove('border-gray-300');
                selectedBtn.classList.add('border-primary-600', 'bg-primary-50', 'text-primary-600');
            }
        }

        // Color selection
        function selectColor(colorName, colorHex) {
            selectedColor = { name: colorName, hex: colorHex };
            
            // Update UI
            document.querySelectorAll('.color-option').forEach(btn => {
                btn.classList.remove('border-primary-600');
                btn.classList.add('border-gray-300');
            });
            
            const selectedBtn = document.querySelector(`[data-color="${colorName}"]`);
            if (selectedBtn && !selectedBtn.disabled) {
                selectedBtn.classList.remove('border-gray-300');
                selectedBtn.classList.add('border-primary-600');
            }
            
            // Update color name display
            document.getElementById('selectedColorName').textContent = colorName;
        }

        // Quantity management
        function updateQuantity(change) {
            const quantityInput = document.getElementById('quantity');
            let currentValue = parseInt(quantityInput.value);
            let newValue = currentValue + change;
            
            if (newValue >= 1 && newValue <= 10) {
                quantityInput.value = newValue;
            }
        }

        // Add to cart from detail page
        function addToCartFromDetail() {
            const quantity = parseInt(document.getElementById('quantity').value);
            
            // Validate selections if required
            if (sizesRequired && !selectedSize) {
                alert('Please select a size');
                return;
            }
            
            if (colorsRequired && !selectedColor) {
                alert('Please select a color');
                return;
            }
            
            // Add to cart with selections
            const cartItem = {
                id: product.id,
                name: product.name,
                price: product.price,
                image: product.image,
                quantity: quantity,
                size: selectedSize,
                color: selectedColor
            };
            
            if (typeof window.CartManager !== 'undefined') {
                window.CartManager.addItem(cartItem.id, cartItem.name, cartItem.price, cartItem.image, cartItem.quantity, {
                    size: cartItem.size,
                    color: cartItem.color
                });
                
                // Show success message
                showAddToCartSuccess();
            } else {
                console.error('CartManager not found');
            }
        }

        // Show add to cart success message
        function showAddToCartSuccess() {
            // Create and show a temporary success message
            const message = document.createElement('div');
            message.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-opacity duration-300';
            message.textContent = 'Added to cart successfully!';
            
            document.body.appendChild(message);
            
            setTimeout(() => {
                message.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(message);
                }, 300);
            }, 2000);
        }

        // Wishlist functionality (placeholder)
        function toggleWishlist() {
            alert('Wishlist functionality coming soon!');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Update cart count
            if (typeof window.CartManager !== 'undefined') {
                window.CartManager.updateCartCount();
            }
            
            // Initialize profile dropdown
            if (typeof updateProfileUI === 'function') {
                updateProfileUI();
            }
        });
    </script>
</body>
</html>
